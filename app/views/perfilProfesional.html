<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Perfil Profesional</title>
    <script src="scripts/perfilProfesional.js"></script>
    <link rel="stylesheet" href="styles/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/07b7b4af07.js" crossorigin="anonymous"></script>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-sm navbar-dark" id="navbar-principal">
        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="logo-navbar">
                    <a class="nav-link" href="homeProfesional.html" id="logo">Home-Connect</a>
                </li>
            </ul>
            <ul class="navbar-nav" id="sesion-navbar">
                <li class="nav-item">
                    <a class="nav-link" href="Cuenta.html" style="color:white;">
                        <i class="fa-solid fa-user" style="color:white;"></i> Cuenta
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="InicioSesion.html" style="color:white;">
                        <button class="btn btn-light" style="shape-margin: 10px;" id="registrarse">Cerrar
                            Sesion</button>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- PROFILE CONTENT -->
    <div class="container" style="padding: 20px;">
        <div class="row">
            <!-- Back Button -->
            <div class="col-12 mb-3">
                <a href="home.html" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left"></i> Volver
                </a>
            </div>

            <!-- Main Profile Section -->
            <div class="col-md-8">
                <!-- Profile Header Card -->
                <div class="card mb-3 Borders">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 text-center">
                                <img id="profile-image" src="" class="rounded-circle mb-3"
                                    style="width: 150px; height: 150px; object-fit: cover;" alt="Foto de perfil">
                            </div>
                            <div class="col-md-8">
                                <h2 id="profile-name">Nombre del Profesional</h2>
                                <h5 class="text-muted" id="profile-profession">Profesión</h5>
                                <p><i class="fas fa-briefcase"></i> <span id="profile-experience">0</span> años de
                                    experiencia</p>
                                <div class="mb-3">
                                    <span class="text-warning" id="profile-stars">
                                        <!-- Stars will be generated here -->
                                    </span>
                                    <span class="ms-2" id="profile-rating">0.0</span>
                                </div>
                                <div class="d-grid gap-2 d-md-block">
                                    <button class="btn btn-primary" id="ColorButton" onclick="openChat()">
                                        <i class="fas fa-comments"></i> Abrir Chat
                                    </button>
                                    <button class="btn btn-success" onclick="openContractModal()">
                                        <i class="fas fa-file-contract"></i> Mandar Contrato
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Section -->
                <div class="card mb-3 Borders">
                    <div class="card-body">
                        <h4><i class="fas fa-user-circle"></i> Sobre mí</h4>
                        <p id="profile-about">
                            Soy un profesional dedicado con años de experiencia en el rubro.
                            Me comprometo a entregar trabajos de alta calidad y a satisfacer
                            las necesidades de mis clientes con profesionalismo y eficiencia.
                        </p>
                    </div>
                </div>

                <!-- Services Section -->
                <div class="card mb-3 Borders">
                    <div class="card-body">
                        <h4><i class="fas fa-tools"></i> Servicios Ofrecidos</h4>
                        <ul id="profile-services">
                            <li>Servicio profesional de calidad</li>
                            <li>Atención personalizada</li>
                            <li>Garantía en todos los trabajos</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-md-4">
                <!-- Contact Info Card -->
                <div class="card mb-3 Borders">
                    <div class="card-body">
                        <h5><i class="fas fa-info-circle"></i> Información de Contacto</h5>
                        <hr>
                        <p><i class="fas fa-map-marker-alt"></i> Guadalajara, Jalisco</p>
                        <p><i class="fas fa-clock"></i> Disponible: Lun-Vie 8:00-18:00</p>
                        <p><i class="fas fa-check-circle text-success"></i> Verificado</p>
                    </div>
                </div>


                <!-- Reviews Preview -->
                <div class="card Borders">
                    <div class="card-body">
                        <h5><i class="fas fa-star text-warning"></i> Reseñas Recientes</h5>
                        <hr>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between">
                                <strong>Cliente 1</strong>
                                <span class="text-warning">★★★★★</span>
                            </div>
                            <p class="small text-muted mb-0">Excelente trabajo, muy profesional.</p>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between">
                                <strong>Cliente 2</strong>
                                <span class="text-warning">★★★★★</span>
                            </div>
                            <p class="small text-muted mb-0">Muy recomendado, cumplió con todo.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer id="footer-principal">
        <div class="container-fluid" id="DivBotones">
            <h4 style="color: white;">Home-Connect &copy; 2024</h4>
        </div>
    </footer>

    <!-- CHAT MODAL -->
    <div id="chatModal" class="chat-modal">
        <div class="chat-container">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-header-info">
                    <img id="chat-profile-img" src="" alt="Profile" class="chat-profile-img">
                    <div class="chat-header-text">
                        <h6 id="chat-profile-name" class="mb-0">Nombre del Profesional</h6>
                    </div>
                </div>
                <button class="chat-close-btn" onclick="closeChat()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Chat Messages Area -->
            <div class="chat-messages" id="chatMessages">
                <!-- Welcome message -->
                <div class="message-date">
                    <span>Hoy</span>
                </div>
                <div class="message received">
                    <div class="message-content">
                        <p>¡Hola! Gracias por contactarme. ¿En qué puedo ayudarte?</p>
                        <span class="message-time">10:30</span>
                    </div>
                </div>
            </div>

            <!-- Chat Input Area (sin botón de adjuntar archivo) -->
            <div class="chat-input-container">
                <input type="text" id="chatInput" class="chat-input" placeholder="Escribe un mensaje..."
                    onkeypress="handleChatKeyPress(event)">
                <button class="chat-send-btn" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- CONTRACT MODAL -->
    <div class="modal fade" id="contractModal" tabindex="-1" aria-labelledby="contractModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="contractModalLabel">
                        <i class="fas fa-file-contract"></i> Crear Contrato
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="contractForm">
                        <div class="mb-3">
                            <label for="contractTitle" class="form-label">Título</label>
                            <input type="text" class="form-control" id="contractTitle" required
                                placeholder="Ej. Reparación de tubería">
                        </div>

                        <div class="mb-3">
                            <label for="contractDetails" class="form-label">Detalles</label>
                            <textarea class="form-control" id="contractDetails" rows="3" required
                                placeholder="Describe los detalles del servicio"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="contractDateTime" class="form-label">Fecha y Hora del Servicio</label>
                            <input type="datetime-local" class="form-control" id="contractDateTime" required>
                        </div>

                        <div class="mb-3">
                            <label for="contractPaymentMethod" class="form-label">Método de Pago</label>
                            <select class="form-select" id="contractPaymentMethod" required>
                                <option value="" selected disabled>Selecciona un método</option>
                                <option value="efectivo">Efectivo</option>
                                <option value="tarjeta">Tarjeta</option>
                                <option value="transferencia">Transferencia</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="contractAmount" class="form-label">Monto (MXN)</label>
                            <input type="number" class="form-control" id="contractAmount" required min="0" step="0.01"
                                placeholder="Ej. 500.00">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success" onclick="submitContract()">
                        <i class="fas fa-paper-plane"></i> Enviar Contrato
                    </button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>